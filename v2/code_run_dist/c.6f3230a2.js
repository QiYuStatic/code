function e(e,s,t,o){Object.defineProperty(e,s,{get:t,set:o,enumerable:!0,configurable:!0})}var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},a=s.parcelRequire8098;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in o){var s=o[e];delete o[e];var a={id:e,exports:{}};return t[e]=a,s.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,s){o[e]=s},s.parcelRequire8098=a),a.register("jYm3s",(function(s,t){e(s.exports,"RunJobComponent",(()=>_));var o=a("jAw9N"),r=a("ejx16"),n=a("j3GXv"),d=a("2BfJR");function i(e){let s=new WebSocket(d.ServerWebSocketUrls.job_client);s.onopen=function(){s.send(JSON.stringify({job_id:e.props.job_id})),e.setState({job_ws:s})},s.onmessage=function(t){const o=JSON.parse(t.data);if(e.props.stdout_handler(o.stdout),e.props.stderr_handler(o.stderr),e.setState({title:o.title,msg:o.msg}),o.end)return s.close(),void e.props.job_done_handler()},s.onerror=function(s){console.log({err:s,type:"web socket disconnect"}),e.setState({title:"网络断开",msg:"正在尝试重新连接 WebSocket ..."}),i(e)}}class _ extends r.Component{constructor(e){super(e),this.close_modal_handler=()=>{this.props.job_cancel_handler()},this.state={job_ws:null,title:"运行中",msg:"任务已经提交，请稍等..."}}componentDidMount(){i(this)}componentWillUnmount(){let e=this.state.job_ws;e&&e.close()}render(){return o.jsx(n.ModalSuccess,{close_modal_handler:this.close_modal_handler,allow_close:!0,title:this.state.title,message:this.state.msg})}}})),a.register("j3GXv",(function(s,t){e(s.exports,"ModalSuccess",(()=>n));var o=a("jAw9N"),r=a("ejx16");class n extends r.Component{constructor(e){super(e)}render(){return o.jsxs("div",{className:"modal is-active",children:[o.jsx("div",{className:"modal-background"}),o.jsx("div",{className:"modal-content",children:o.jsxs("div",{className:"message is-info",children:[o.jsx("div",{className:"message-header",children:this.props.title}),o.jsx("div",{className:"message-body",children:this.props.message})]})}),o.jsx("button",{className:"modal-close is-large","aria-label":"close",onClick:this.props.close_modal_handler})]})}}})),a.register("2BfJR",(function(s,t){e(s.exports,"ServerApiUrls",(()=>o)),e(s.exports,"ServerWebSocketUrls",(()=>a));const o={job_add_api_c:"/api/job/add/c",job_add_api_js:"/api/job/add/js",job_add_api_py:"/api/job/add/py",job_add_api_rust:"/api/job/add/rust",job_show_c_asm:"/api/job/show/c/asm"},a={job_client:"wss://run.c-art.tech/job/client"}})),a.register("luQ7g",(function(s,t){e(s.exports,"CEventNames",(()=>o));const o={stdout:"c_stdout",stderr:"c_stderr",job_add_c:"c_job_add_c",job_show_c_asm:"c_job_show_c_asm",job_add_js:"c_job_add_js",job_add_py:"c_job_add_py",job_add_rust:"c_job_add_rust"}})),a.register("bHY2s",(function(s,t){function o(e,s){let t=new CustomEvent(e,{detail:s});document.dispatchEvent(t)}e(s.exports,"document_send_event",(()=>o))})),a.register("fwOz2",(function(s,t){e(s.exports,"CodeRunApi",(()=>r));var o=a("2BfJR");class r{static async job_add_c(e){return await r._add_lang_job(o.ServerApiUrls.job_add_api_c,e)}static async job_show_c_asm(e){return await r._add_lang_job(o.ServerApiUrls.job_show_c_asm,e)}static async job_add_js(e){return await r._add_lang_job(o.ServerApiUrls.job_add_api_js,e)}static async job_add_py(e){return await r._add_lang_job(o.ServerApiUrls.job_add_api_py,e)}static async job_add_rust(e){return await r._add_lang_job(o.ServerApiUrls.job_add_api_rust,e)}static async _add_lang_job(e,s){let t=await fetch(e,{method:"POST",body:JSON.stringify(s)});if(t.status>=300)return alert("添加任务失败:"+JSON.stringify(t)),null;const o=await t.json();return console.log({type:"add lang job",url:e,data:s,ret:o}),o.job_id}}}));